
<head>

    <script>
        (function(e, p){
            var m = location.href.match(/platform=(win8|win|mac|linux|cros)/);
            e.id = (m && m[1]) ||
                    (p.indexOf('Windows NT 6.2') > -1 ? 'win8' : p.indexOf('Windows') > -1 ? 'win' : p.indexOf('Mac') > -1 ? 'mac' : p.indexOf('CrOS') > -1 ? 'cros' : 'linux');
            e.className = e.className.replace(/\bno-js\b/,'js');
        })(document.documentElement, window.navigator.userAgent)
    </script>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">
    <meta content=
                  "Google Chrome is a browser that combines a minimal design with sophisticated technology to make the web faster, safer, and easier."
          name="description">
    <title>
        Vehicle Voice Recognition System
    </title>
    <link href="https://plus.google.com/100585555255542998765" rel="publisher">
    <link href="rsz_mic3.png" rel="icon" type="image/ico">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;subset=latin" rel=
            "stylesheet">
    <link href="/intl/en/chrome/assets/common/css/chrome.min.css" rel="stylesheet">
    <link href="hello.min.css" rel="stylesheet">
    <script src="//www.google.com/js/gweb/analytics/autotrack.js">
    </script>
    <script>
        new gweb.analytics.AutoTrack({
            profile: 'UA-26908291-1'
        });
    </script>
    <style>
        #grid{
          background-image: url("background2.png");
          background-repeat: no-repeat;
          background-size: 100%;
          background-position-y: -50px;
        }
        #results{
          background: white;
          padding: 20px !important;
        }
        #results_id{
          width: 130px;
          margin-left: auto;
          margin-right: auto;
          margin-top: 0px;
          border: none;
        }
        #info_start{
          color:black;
        }
        .g-signin2{
          position: fixed;
          bottom : 30px;
          left: 47%;
        }
        /* CSS changes by Digant */
        #info {
            font-size: 20px;
        }
        #div_start {
            float: right;
        }
        #headline {
            text-decoration: none
        }
        #results {
            font-size: 14px;
            font-weight: bold;
            border: 1px solid #ddd;
            padding: 15px;
            text-align: left;
        }
        #results_id {
            font-size: 14px;
            font-weight: bold;
            border: 1px solid #ddd;
            padding: 15px;
            text-align: left;
            min-height: 150px;
        }
        #start_button {
            border: 0;
            background-color:transparent;
            padding: 0;
        }
        .interim {
            color: gray;
        }
        .final {
            color: black;
            padding-right: 3px;
        }
        .button {
            display: none;
        }
        .marquee {
            margin: 20px auto;
        }

        #buttons {
            margin: 10px 0;
            position: relative;
            top: -50px;
        }

        #copy {
            margin-top: 20px;
        }

        #copy > div {
            display: none;
            margin: 0 70px;
        }

        #mydiv
{
    width    : 120px;
    height   : 202px;
    overflow : hidden;
    position : relative;
}

#myiframe
{
    position : absolute;
    top      : -472px;
    left     : -160px;
    width    : 1280px;
    height   : 1200px;
}

    </style>
    <style>
        a.c1 {font-weight: normal;}
    </style>
</head>
<body class="" id="grid">
<div class="browser-landing" id="main">
    <div class="compact marquee-stacked" id="marquee">
        <div class="marquee-copy">
            <h1>
                Vehicle Voice Recognition Assistant
            </h1>
        </div>
    </div>
    <div class="compact marquee">
        <div id="info">
            <p id="info_start">
                Click on the microphone and start talking.
            </p>
            <p id="info_speak_now" style="display:none">
                Speak now.
            </p>
            <p id="info_no_speech" style="display:none">
                No speech was detected. You may need to adjust your <a href=
                                                                               "//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892">microphone
                settings</a>.
            </p>
            <p id="info_no_microphone" style="display:none">
                No microphone was found. Ensure that a microphone is installed and that
                <a href="//support.google.com/chrome/bin/answer.py?hl=en&amp;answer=1407892">
                    microphone settings</a> are configured correctly.
            </p>
            <p id="info_allow" style="display:none">
                Click the "Allow" button above to enable your microphone.
            </p>
            <p id="info_denied" style="display:none">
                Permission to use microphone was denied.
            </p>
            <p id="info_blocked" style="display:none">
                Permission to use microphone is blocked. To change, go to
                chrome://settings/contentExceptions#media-stream
            </p>
            <p id="info_upgrade" style="display:none">
                Web Speech API is not supported by this browser. Upgrade to <a href=
                                                                                       "//www.google.com/chrome">Chrome</a> version 25 or later.
            </p>
        </div>
        <div id="div_start">
            <button id="start_button" onclick="startButton(event)"><img alt="Start" id="start_img"
                                                                        src="rsz_mic3.png"></button>
        </div>
        <div id="results">
            <span class="final" id="final_span"></span> <span class="interim" id=
                "interim_span"></span>
        </div>
        <div id="copy">
            <button class="button" id="copy_button" onclick="copyButton()">Copy and Paste</button>
            <div id="copy_info">
                <p>
                    Press Control-C to copy text.
                </p>
                <p>
                    (Command-C on Mac.)
                </p>
            </div><button class="button" id="email_button" onclick="emailButton()">Create
            Email</button>
            <div id="email_info">
                <p>
                    Redirecting to native mail application.
                </p>
            </div>
        </div>
        <div class="compact marquee" id="div_language">
            <select id="select_language" onchange="updateCountry()">
            </select>&nbsp;&nbsp; <select id="select_dialect">
        </select>
        </div>

        <div class="g-signin2" data-onsuccess="onSignIn"></div>
        <div class="results_class" id="results_id">
            <pre id="results_par_id">
            </pre>
            <div id="youtube_div"></div>
            <div id="maps_div">
            </div>
            <div id="weather_div"></div>
        </div>
        <input type="hidden" id="userEmail" value="">
        <div id="hangouts-div"></div>
    </div>
</div>
<div id="mydiv">
  <iframe src="http://www.timetemperature.com/tzus/california_time_zone.shtml" id="myiframe" scrolling="no">
</div>
<script src="https://apis.google.com/js/client.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="705090311833-g7arbk0k4rds033jdce4uleoieldaqva.apps.googleusercontent.com">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="auth.js"></script>
<script src="search.js"></script>
<script src="/intl/en/chrome/assets/common/js/chrome.min.js">
</script>
<script>
    window.___gcfg = {
        lang: 'fr'
        parsetags: 'onload'
    };
</script>
<script>
    var chrmMenuBar = new chrm.ui.MenuBar();
    chrmMenuBar.decorate('nav');
    var chrmLogo = new chrm.ui.Logo('logo');

    var chrmscroll = new chrm.ui.SmoothScroll('scroll');
    chrmscroll.init();



    window.___gcfg = { lang: 'en' };
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();




    var doubleTracker = new gweb.analytics.DoubleTrack('floodlight', {
        src: 2542116,
        type: 'clien612',
        cat: 'chrom0'
    });
    doubleTracker.track();

    doubleTracker.trackClass('doubletrack', true);
</script> <script>
    var langs =
            [['Afrikaans',       ['af-ZA']],
                ['Bahasa Indonesia',['id-ID']],
                ['Bahasa Melayu',   ['ms-MY']],
                ['Català',          ['ca-ES']],
                ['Čeština',         ['cs-CZ']],
                ['Dansk',           ['da-DK']],
                ['Deutsch',         ['de-DE']],
                ['English',         ['en-AU', 'Australia'],
                    ['en-CA', 'Canada'],
                    ['en-IN', 'India'],
                    ['en-NZ', 'New Zealand'],
                    ['en-ZA', 'South Africa'],
                    ['en-GB', 'United Kingdom'],
                    ['en-US', 'United States']],
                ['Español',         ['es-AR', 'Argentina'],
                    ['es-BO', 'Bolivia'],
                    ['es-CL', 'Chile'],
                    ['es-CO', 'Colombia'],
                    ['es-CR', 'Costa Rica'],
                    ['es-EC', 'Ecuador'],
                    ['es-SV', 'El Salvador'],
                    ['es-ES', 'España'],
                    ['es-US', 'Estados Unidos'],
                    ['es-GT', 'Guatemala'],
                    ['es-HN', 'Honduras'],
                    ['es-MX', 'México'],
                    ['es-NI', 'Nicaragua'],
                    ['es-PA', 'Panamá'],
                    ['es-PY', 'Paraguay'],
                    ['es-PE', 'Perú'],
                    ['es-PR', 'Puerto Rico'],
                    ['es-DO', 'República Dominicana'],
                    ['es-UY', 'Uruguay'],
                    ['es-VE', 'Venezuela']],
                ['Euskara',         ['eu-ES']],
                ['Filipino',        ['fil-PH']],
                ['Français',        ['fr-FR']],
                ['Galego',          ['gl-ES']],
                ['Hrvatski',        ['hr_HR']],
                ['IsiZulu',         ['zu-ZA']],
                ['Íslenska',        ['is-IS']],
                ['Italiano',        ['it-IT', 'Italia'],
                    ['it-CH', 'Svizzera']],
                ['Lietuvių',        ['lt-LT']],
                ['Magyar',          ['hu-HU']],
                ['Nederlands',      ['nl-NL']],
                ['Norsk bokmål',    ['nb-NO']],
                ['Polski',          ['pl-PL']],
                ['Português',       ['pt-BR', 'Brasil'],
                    ['pt-PT', 'Portugal']],
                ['Română',          ['ro-RO']],
                ['Slovenščina',     ['sl-SI']],
                ['Slovenčina',      ['sk-SK']],
                ['Suomi',           ['fi-FI']],
                ['Svenska',         ['sv-SE']],
                ['Tiếng Việt',      ['vi-VN']],
                ['Türkçe',          ['tr-TR']],
                ['Ελληνικά',        ['el-GR']],
                ['български',       ['bg-BG']],
                ['Pусский',         ['ru-RU']],
                ['Српски',          ['sr-RS']],
                ['Українська',      ['uk-UA']],
                ['한국어',            ['ko-KR']],
                ['中文',             ['cmn-Hans-CN', '普通话 (中国大陆)'],
                    ['cmn-Hans-HK', '普通话 (香港)'],
                    ['cmn-Hant-TW', '中文 (台灣)'],
                    ['yue-Hant-HK', '粵語 (香港)']],
                ['日本語',           ['ja-JP']],
                ['हिन्दी',            ['hi-IN']],
                ['ภาษาไทย',         ['th-TH']]];

    for (var i = 0; i < langs.length; i++) {
        select_language.options[i] = new Option(langs[i][0], i);
    }
    select_language.selectedIndex = 7;
    updateCountry();
    select_dialect.selectedIndex = 6;
    showInfo('info_start');

    function updateCountry() {
        for (var i = select_dialect.options.length - 1; i >= 0; i--) {
            select_dialect.remove(i);
        }
        var list = langs[select_language.selectedIndex];
        for (var i = 1; i < list.length; i++) {
            select_dialect.options.add(new Option(list[i][1], list[i][0]));
        }
        select_dialect.style.visibility = list[1].length == 1 ? 'hidden' : 'visible';
    }

    var create_email = false;
    var final_transcript = '';
    var recognizing = false;
    var ignore_onend;
    var start_timestamp;
    if (!('webkitSpeechRecognition' in window)) {
        upgrade();
    } else {
        start_button.style.display = 'inline-block';
        var recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;

        recognition.onstart = function() {
            recognizing = true;
            showInfo('info_speak_now');
            start_img.src = 'rsz_mic1.png';
        };

        recognition.onerror = function(event) {
            if (event.error == 'no-speech') {
                start_img.src = 'rsz_mic3.png';
                showInfo('info_no_speech');
                ignore_onend = true;
            }
            if (event.error == 'audio-capture') {
                start_img.src = 'rsz_mic3.png';
                showInfo('info_no_microphone');
                ignore_onend = true;
            }
            if (event.error == 'not-allowed') {
                if (event.timeStamp - start_timestamp < 100) {
                    showInfo('info_blocked');
                } else {
                    showInfo('info_denied');
                }
                ignore_onend = true;
            }
        };

        recognition.onend = function() {
            recognizing = false;
            if (ignore_onend) {
                return;
            }
            start_img.src = 'rsz_mic3.png';
            if (!final_transcript) {
                showInfo('info_start');
                return;
            }
            showInfo('');
            if (window.getSelection) {
                window.getSelection().removeAllRanges();
                var range = document.createRange();
                range.selectNode(document.getElementById('final_span'));
                window.getSelection().addRange(range);
            }
            if (create_email) {
                create_email = false;
                createEmail();
            }
        };

        recognition.onresult = function(event) {
            var interim_transcript = '';
            if (typeof(event.results) == 'undefined') {
                recognition.onend = null;
                recognition.stop();
                upgrade();
                return;
            }
            for (var i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    final_transcript += event.results[i][0].transcript;
                } else {
                    interim_transcript += event.results[i][0].transcript;
                }
            }
            final_transcript = capitalize(final_transcript);
            final_span.innerHTML = linebreak(final_transcript);
            if(final_transcript.toLowerCase().indexOf("schedule")>-1){
                checkAuth();
            } else if(final_transcript.toLowerCase().indexOf("play")>-1) {
                checkYouTubeAuth();
            } else if(final_transcript.toLowerCase().indexOf("directions")>-1) {
                var first = final_transcript.indexOf("from");
                var second = final_transcript.indexOf("to");
                var src = final_transcript.substring(first + 4, second);
                var dst = final_transcript.substring(second);
                initMap(src, dst, 1);
            } else if (final_transcript.toLowerCase().indexOf("cricket")>-1){
                list_cricket_matches();
            }else if(final_transcript.toLowerCase().indexOf("find me")>-1) {
                var secondstr = final_transcript.substring(7);
                initMap(secondstr, "", 2);
            }else if (final_transcript.toLowerCase().indexOf("cricket")>-1){
                list_cricket_matches()
            } else if(final_transcript.toLowerCase().indexOf("call")>-1){
                console.log("CALL COMMAND RECEIVED");
                var callee = final_transcript.substring(5);
//                var hangouts_button = '<b> button </b>'
//                $('#hangouts-div').html(hangouts_button);
                renderHangoutButtons(callee);
                $("#test").click();
            } else if(final_transcript.toLowerCase().indexOf("weather")>-1) {
                // var index = final_transcript.indexOf("in")
                // var substr = final_transcript.substring(index + 3);
                initWeather();

            }

            interim_span.innerHTML = linebreak(interim_transcript);
            if (final_transcript || interim_transcript) {
                showButtons('inline-block');
            }
        };
    }

    function renderHangoutButtons(callee){
        gapi.hangout.render('hangouts-div', {
            'render': 'createhangout',
            'invites' : "[{'id':" + callee + ",'invite_type': 'EMAIL'}]"
        });
    }
    function upgrade() {
        start_button.style.visibility = 'hidden';
        showInfo('info_upgrade');
    }

    var two_line = /\n\n/g;
    var one_line = /\n/g;
    function linebreak(s) {
        return s.replace(two_line, '<p></p>').replace(one_line, '<br>');
    }

    var first_char = /\S/;
    function capitalize(s) {
        return s.replace(first_char, function(m) { return m.toUpperCase(); });
    }
    function list_cricket_matches()
    {
        $.getJSON("http://cricapi.com/api/cricket/", function(data, status){
            //alert("Data: " + data['data'][0]['title'] + "\nStatus: " + status + typeof(data));
            console.log("data length " + data['data'].length)
            var html = '<table style="width:100% border-collapse:collapse align:center"><tr><th>Recent Matches</th></tr>';

            for (var i = 0; i < data['data'].length; i++) {
                console.log(data['data'][i]['title'])
                if (i%2 == 0)
                    html += '<tr bgcolor="orange" ><td style = "padding-top:.9em padding-bottom:.9em">' + data['data'][i]['title'] + '</td></tr>';
                else
                    html += '<tr bgcolor="yellow" ><td style = "padding-top:.9em padding-bottom:.9em">' + data['data'][i]['title'] + '</td></tr>';
            }
            html += "</tr></table>";

            $(html).appendTo('#youtube_div');
        });
    }
    function createEmail() {
        var n = final_transcript.indexOf('message');
        if (n < 0 || n >= 80) {
            n = 40 + final_transcript.substring(40).indexOf(' ');
        }
        var subject = encodeURI(final_transcript.substring(0, n));
        var body = encodeURI(final_transcript.substring(n + 7));
        window.location.href = 'mailto:?subject=' + subject + '&body=' + body;
    }

    function copyButton() {
        if (recognizing) {
            recognizing = false;
            recognition.stop();
        }
        copy_button.style.display = 'none';
        copy_info.style.display = 'inline-block';
        showInfo('');
    }

    function emailButton() {
        if (recognizing) {
            create_email = true;
            recognizing = false;
            recognition.stop();
        } else {
            createEmail();
        }
        email_button.style.display = 'none';
        email_info.style.display = 'inline-block';
        showInfo('');
    }

    function startButton(event) {
        removeText();
        if (recognizing) {
            recognition.stop();
            return;
        }
        final_transcript = '';
        recognition.lang = select_dialect.value;
        recognition.start();
        ignore_onend = false;
        final_span.innerHTML = '';
        interim_span.innerHTML = '';
        showInfo('info_allow');
        showButtons('none');
        start_timestamp = event.timeStamp;
    }

    function showInfo(s) {
        if (s) {
            for (var child = info.firstChild; child; child = child.nextSibling) {
                if (child.style) {
                    child.style.display = child.id == s ? 'inline' : 'none';
                }
            }
            info.style.visibility = 'visible';
        } else {
            info.style.visibility = 'hidden';
        }
    }

    var current_style;
    function showButtons(style) {
        if (style == current_style) {
            return;
        }
        current_style = style;
        copy_button.style.display = style;
        email_button.style.display = style;
        copy_info.style.display = 'none';
        email_info.style.display = 'none';
    }

    //Calendar calls start

        var CLIENT_ID = '705090311833-g7arbk0k4rds033jdce4uleoieldaqva.apps.googleusercontent.com';
        var SCOPES = ["https://www.googleapis.com/auth/calendar.readonly"];

        function checkAuth() {
            gapi.auth.authorize(
                    {
                        'client_id': CLIENT_ID,
                        'scope': SCOPES.join(' '),
                        'immediate': false
                    }, handleAuthResult);
        }

        function handleAuthResult(authResult) {
            if (authResult && !authResult.error) {
                console.log("Authenticated google calendar");
                loadCalendarApi();
            } else {
                console.log("Google calendar failed to autheticate");
            }
        }

        function handleAuthClick(event) {
            gapi.auth.authorize(
                    {client_id: CLIENT_ID, scope: SCOPES, immediate: false},
                    handleAuthResult);
            return false;
        }

        function loadCalendarApi() {
            gapi.client.load('calendar', 'v3', listUpcomingEvents);
        }

        function listUpcomingEvents() {
            var date1 = new Date();
            date1.setDate(date1.getDate());
            date1.setHours(0);
            var date2 = new Date(date1);
            date2.setDate(date1.getDate() + 6);
            date1 = moment(date1);
            date2 = moment(date2);
            var request = gapi.client.calendar.events.list({
                'calendarId': document.getElementById("userEmail").value,
                'timeMin': date1.format(),
                'timeMax': date2.format(),
                'singleEvents': true,
                'orderBy': 'startTime'
            });

            request.execute(function (resp) {
                var events = resp.items;
                if (events.length > 0) {
                    appendPre('Your Google Calendar events for the week:');
                    for (i = 0; i < events.length; i++) {
                        var event = events[i];
                        var when = event.start.dateTime;
                        var eventTime = new Date(event.start.dateTime);
                        appendPre(i + 1 + ". " + event.summary + ' (' + eventTime + ')')
                    }
                } else {
                    appendPre('You have no events in your Google Calendar for the week!');
                }
            });
        }

        function appendPre(message) {
            var pre = document.getElementById('results_par_id');
            var textContent = document.createTextNode(message + '\n');
            pre.appendChild(textContent);
        }

        function removeText() {
            var resultpar = document.getElementById('results_par_id');
            var youtube_div = document.getElementById('youtube_div');
            var maps_div = document.getElementById('maps_div');
            var hangouts_div = document.getElementById('hangouts-div');
            var weather_div = document.getElementById('weather_div');
            if(resultpar != null) {
                document.getElementById('results_par_id').innerHTML = "";
            }
            if(youtube_div != null) {
                document.getElementById('youtube_div').innerHTML = "";
            }
            if(maps_div != null) {
                document.getElementById('maps_div').innerHTML = "";
            }
            if(hangouts_div != null) {
                hangouts_div.innerHTML = "";
            }
            if(weather_div != null) {
                document.getElementById('weather_div').innerHTML = "";
            }
        }

    //    Calendar calls end
    function list_cricket_matches()
    {
        $.getJSON("http://cricapi.com/api/cricket/", function(data, status){
        //alert("Data: " + data['data'][0]['title'] + "\nStatus: " + status + typeof(data));
        console.log("data length " + data['data'].length)
        var html = '<table style="width:100% border-collapse:collapse align:center"><tr><th>Recent Matches</th></tr>';

        for (var i = 0; i < data['data'].length; i++) {
            console.log(data['data'][i]['title'])
            if (i%2 == 0)
                html += '<tr bgcolor="orange" ><td style = "padding-top:.9em padding-bottom:.9em">' + data['data'][i]['title'] + '</td></tr>';
            else
                html += '<tr bgcolor="yellow" ><td style = "padding-top:.9em padding-bottom:.9em">' + data['data'][i]['title'] + '</td></tr>';
        }
            html += "</tr></table>";

        $(html).appendTo('#youtube_div');
        });
    }
    //  YouTube calls begin
        var OAUTH2_CLIENT_ID = '705090311833-g7arbk0k4rds033jdce4uleoieldaqva.apps.googleusercontent.com';
        var OAUTH2_SCOPES = [
            'https://www.googleapis.com/auth/youtube'
        ];

        function checkYouTubeAuth(){
            gapi.auth.authorize({
                client_id: OAUTH2_CLIENT_ID,
                scope: OAUTH2_SCOPES,
                immediate: false
            }, handleAuthYouTubeResult);
        }

        function handleAuthYouTubeResult(authResult) {
            if (authResult && !authResult.error) {
                console.log("Youtube api successfully authenticated");
                loadAPIClientInterfaces();
            } else {
                console.log("Youtube api failed to authenticate");
            }
        }

        function loadAPIClientInterfaces() {
            gapi.client.load('youtube', 'v3', function() {
                handleAPILoaded();
            });
        }

        function handleAPILoaded() {
            var q = document.getElementById('final_span').innerHTML;
            q = q.substring(9);
            var request = gapi.client.youtube.search.list({
                q: q,
                part: 'snippet'
            });

            request.execute(function(response) {
                var str = JSON.stringify(response.result);
                var par = JSON.parse(str);
                var videoId = par.items[0].id.videoId;

                var innerYoutubeHTML = '<iframe id="ytplayer" type="text/html" width="900" height="550" src="http://www.youtube.com/embed/'+ videoId + '?autoplay=1&origin=http://example.com" frameborder="0"/>';
                $('#youtube_div').html(innerYoutubeHTML);
            });
        }
    //  YouTube calls end
    // Maps calls start
    function initMap(src, dst, type){
        var iframe_string;
        if(type == 1) {
            iframe_string = '<iframe id="maps_iframe" width="600" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyBQBK3oXMA6yuVWla9b8JLdYioK3Vlc8EQ&origin=' + src + '&destination=' + dst + '&avoid=tolls|highways" allowfullscreen />';
        } else if(type == 2 ){
            iframe_string = '<iframe id="maps_iframe" width="600" height="450" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/search?key=AIzaSyBQBK3oXMA6yuVWla9b8JLdYioK3Vlc8EQ&q='+src+'" allowfullscreen />';
        }
        $('#maps_div').html(iframe_string);
    }
    // Maps calls end
	//AIzaSyBQBK3oXMA6yuVWla9b8JLdYioK3Vlc8EQ

    // Sign in calls start
    function onSignIn(googleUser) {
        var profile = googleUser.getBasicProfile();
        document.getElementById("userEmail").value = profile.getEmail();
//        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
//        console.log('Name: ' + profile.getName());
//        console.log('Image URL: ' + profile.getImageUrl());
//        console.log('Email: ' + profile.getEmail());
    }

    //sign in calls end

    //weather starts
    function initWeather() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            console.log("Geolocation is not supported by this browser.");
        }

    }

    function showPosition(position) {
        var latitude =  position.coords.latitude;
        var longitude = position.coords.longitude;
        console.log(latitude);
        console.log(longitude);
        var iframeTime = '<iframe id="maps_iframe" width="100%" height="450" frameborder="0" style="border:0" src="http://forecast.io/embed/#lat='+latitude+'&lon='+longitude+'&name=your Location&color=#00aaff&font=Georgia&units=uk" allowfullscreen />';
        console.log(iframeTime);
        $('#weather_div').html(iframeTime);
    }
    //weather ends
</script>


</body>
